<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../coinport-api/api-my-trades.html">

<!--
amount: 0.001
id: "1000001642192001"
isSell: true
maker: "1000001418"
maker_order_id: "1000001640705"
price: 1380
taker: "1000000002"
taker_order_id: "1000001642192"
timestamp: 1423477405381

-->
<polymer-element name="section-my-trades" attributes="marketId" vertical layout>
  <template>
    <link rel="stylesheet" href="section-my-trades.css">
    <api-my-trades id="ajax" trades="{{trades}}" marketId="{{marketId}}" auto></api-my-trades>
    <table class="dense">
      <thead>
        <tr>
          <td></td>
          <td>{{M.type}}</td>
          <td>{{M.price}}</td>
          <td>{{M.quantity}}</td>
          <td>{{M.total}}</td>
          <td>{{M.time}}</td>
          <td>{{M.id}}</td>
          <td>{{M.orderId}}</td>
        </tr>
      </thead>
      <tbody>
        <template repeat="{{trade,idx in trades}}">
          <tr>
            <td class="idx">{{idx+1}}</td>
            <td class="{{trade.class}}">{{trade | formatLabel}}</td>
            <td class="{{trade.class}}">
              <nice-number v="{{trade.price}}"></nice-number>
            </td>
            <td>
              <nice-number p="4" v="{{trade.amount}}"></nice-number>
            </td>
            <td>
              <nice-number p="4" v="{{trade.total}}"></nice-number>
            </td>
            <td>
              {{trade.timestamp | formatTime}}
            </td>
            <td>{{trade.id}}</td>
            <td>
              <template if="{{window.state.uid == trade.maker}}">
                {{trade.maker_order_id}}
              </template>
              <template if="{{window.state.uid != trade.maker}}">
                {{trade.taker_order_id}}
              </template>
            </td>
          </tr>
        </template>
      </tbody>
    </table>
  </template>
  <script src="section-my-trades.js"></script>
</polymer-element>
