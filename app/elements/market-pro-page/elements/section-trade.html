<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../coinport-api/api-submit-orders.html">

<polymer-element name="section-trade" attributes="market" vertical layout>
  <template>
    <link rel="stylesheet" href="section-trade.css">

    <api-submit-orders id="submitOrderAjax" results="{{results}}"></api-submit-orders>

    <paper-tabs selected="{{selected}}">
      <paper-tab>{{M.buyAction}}</paper-tab>
      <paper-tab>{{M.sellAction}}</paper-tab>
    </paper-tabs>
    <core-animated-pages class="pages" selected="{{selected}}">
      <section>
        <div class="form" vertical layout>

          <div horizontal center layout>
            <div flex>{{M.price}}</div>
            <input flex two is="core-input" type="number" min="0" step="0.00000001" preventInvalidInput placeholder="0.0000" value="{{buyPrice}}"
            committedValue="{{committedBuyPrice}}">
          </div>
          <div center horizontal layout>
            <div flex>{{M.quantity}}</div>
            <input flex two is="core-input" type="number" min="0" step="0.0001" preventInvalidInput placeholder="0.0000" value="{{buyQuantity}}"
            committedValue="{{committedBuyQuantity}}">
          </div>
          <div horizontal center layout>
            <div flex>{{M.total}}</div>
            <div flex two>
              <nice-number p="4" v="{{buyQuantity * buyPrice}}" unit="{{market.baseCurrency.unit}}"></nice-number>
            </div>
          </div>
          <paper-button id="doBuy" on-tap="{{doBuy}}" disabled?="{{!buyEnabled}}">{{M.buyAction}} {{market.currency.id}}</paper-button>
        </div>
      </section>
      <section>
        <div class="form" vertical layout>

          <div horizontal center layout>
            <div flex>{{M.price}}</div>
            <input flex two is="core-input" type="number" min="0" step="0.00000001" preventInvalidInput placeholder="0.0000" value="{{sellPrice}}"
            committedValue="{{committedSellPrice}}">
          </div>
          <div center horizontal layout>
            <div flex>{{M.quantity}}</div>
            <input flex two is="core-input" type="number" min="0" step="0.0001" preventInvalidInput placeholder="0.0000" value="{{sellQuantity}}"
            committedValue="{{committedSellQuantity}}">
          </div>
          <div horizontal center layout>
            <div flex>{{M.total}}</div>
            <div flex two>
              <nice-number p="4" v="{{sellQuantity * sellPrice}}" unit="{{market.baseCurrency.unit}}"></nice-number>
            </div>
          </div>
          <paper-button id="doSell" on-tap="{{doSell}}" id="sellButton" disabled?="{{!sellEnabled}}">{{M.sellAction}} {{market.currency.id}}</paper-button>
        </div>
      </section>
    </core-animated-pages>
  </template>
  <script src="section-trade.js"></script>
</polymer-element>
