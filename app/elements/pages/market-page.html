<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-drawer-panel/core-drawer-panel.html">
<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../../bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="../../bower_components/core-icon-button/core-icon-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../cp-globals/cp-globals.html">
<link rel="import" href="../cp-page/cp-page.html">
<link rel="import" href="../cp-icons/crypto-icons.html">
<link rel="import" href="../cp-market/cp-market-list.html">
<link rel="import" href="../cp-hasfooter/cp-hasfooter.html">

<polymer-element name="market-page" attributes="market">
<template>
<link rel="stylesheet" href="market-page.css">

<cp-globals id="globals"></cp-globals>
<cp-page style="background:{{bgcolor}}"toolbarSelect="/market" hideToolbar>
  <core-drawer-panel forceNarrow>

    <core-header-panel mode="seamed" id="drawer" drawer>
      <cp-market-list market="{{market}}"></cp-market-list>
    </core-header-panel>

    <core-header-panel mode="waterfall" cross-fade main>

      <core-toolbar style="background:{{bgcolor}}" id="toolbar">
        <a href="/#/market"><paper-icon-button icon="arrow-back"></paper-icon-button></a>
        <paper-icon-button icon="menu" core-drawer-toggle></paper-icon-button>
        <div flex id="market-title">{{market}} ({{$.globals.configs.currencies[getTargetCoin(market)].label}})</div>
        <a href="/#/chart/{{market}}"><paper-icon-button icon="trending-up"></paper-icon-button></a>
        <a href="xxxxx"><paper-icon-button icon="info-outline"></paper-icon-button></a>
      </core-toolbar>

      <cp-hasfooter flex>
        <div id="main" hero-id="{{market}}" hero flex></div>
      </cp-hasfooter>
    </core-header-panel>
  </core-drawer-panel>
</cp-page>

</template>

<script>
  (function () {
    'use strict';

     Polymer(Polymer.mixin({
          bgcolor: 'white',
          marketChanged: function(oldV, newV) {
            this.bgcolor = this.$.globals.helpers.getTargetCoin(this.market).color;
          },
          getTargetCoin: function(market) {
            return market.substring(4);
          }
        }, window.configMixin));

      })();
</script>
</polymer-element>
