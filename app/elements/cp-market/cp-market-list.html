<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../../bower_components/core-menu/core-menu.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">

<polymer-element name="cp-market-list" vertical layout attributes="market,globalConfig">
<template>
  <link rel="stylesheet" href="cp-market-list.css">
  <paper-tabs valueattr="group" selected="{{selectedTab}}">
    <paper-tab group="BTC">BTC MARKETS</paper-tab>
    <paper-tab group="CNY">CNY MARKETS</paper-tab>
  </paper-tabs>

  <core-animated-pages valueattr="group" flex selected="{{selectedTab}}">
  	<section group="BTC">
  		<core-menu valueattr="hash" selected="{{market}}">
  		<template repeat="{{c in globalConfig.btcMarkets}}">
  			 <a hash="BTC-{{c}}" active?="{{market==='BTC-'+c}}" href="/#/market/BTC-{{c}}">
          <paper-item center horizontal layout flex>
            BTC-{{c}} ({{globalConfig.currencies[c].label}})</a>
          </paper-item>
        </a>
  		</template>
  		</core-menu>
  	</section>
  	<section group="CNY">
  		<core-menu valueattr="hash" selected="{{market}}">
  		<template repeat="{{c in globalConfig.cnyMarkets}}">
        <a hash="CNY-{{c}}" active?="{{market==='CNY-'+c}}" href="/#/market/CNY-{{c}}">
          <paper-item center horizontal layout flex>
            CNY-{{c}} ({{globalConfig.currencies[c].label}})</a>
          </paper-item>
        </a>
      </template>
  		</core-menu>
  	</section>
  </core-animated-pages>
</template>

<script>

  Polymer({

    ready: function() {
      this.market= 'CNY-BTC';
      this.selectedTab= 'XX';
    },
    marketChanged: function(o, n) {
      var tab = n.substring(0, 3);
      if (tab === "BTC" || tab === "CNY"){
        this.selectedTab = tab;
      }
    }
  });

</script>
</polymer-element>
