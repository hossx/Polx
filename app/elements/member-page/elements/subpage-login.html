<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input-decorator.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/core-a11y-keys/core-a11y-keys.html">
<link rel="import" href="../../../bower_components/paper-spinner/paper-spinner.html">
<link rel="import" href="../../coinport-api/api-login.html">

<polymer-element name="subpage-login">
  <template>
    <link rel="stylesheet" href="subpage-login.css">

    <api-login id="loginAjax" loading="{{loading}}" email="{{email}}" password="{{password}}" profile="{{profile}}"></api-login>

    <div class="container" vertical layout>
      <div class="label">{{M.login}}</div>
      <div class="form">
        <div class="inner" center-justified vertical layout>
          <input readonly?="{{loading}}" is="core-input" class="input first" value="{{email}}" placeholder="{{M.email}}">
          <input readonly?="{{loading}}" is="core-input" class="input last" type="password" value="{{password}}" placeholder="{{M.password}}">
        </div>
        <div class="errorMsg">{{errorMsg}}</div>
      </div>

      <div class="action" vertical center-justified layout>
        <template if="{{loading}}">
          <paper-spinner self-center active?="{{loading}}"></paper-spinner>
        </template>
        <template if="{{!loading}}">
          <paper-button class="primary" disabled?="{{buttonDisabled}}" on-tap="{{logMeIn}}">{{M.login}}</paper-button>
          <core-a11y-keys target="{{}}" keys="enter" on-keys-pressed="{{logMeIn}}"></core-a11y-keys>
        </template>
      </div>
      <div class="options" horizontal center-justified layout>
        <a href="/#/member/register">
          <paper-button class="sub highlight" noink>{{M.register}}</paper-button>
        </a>
        <a href="/#/member/forgetpwd">
          <paper-button class="sub" noink>{{M.forgetpassword}}</paper-button>
        </a>
      </div>

    </div>
  </template>
  <script src="subpage-login.js"></script>
</polymer-element>
