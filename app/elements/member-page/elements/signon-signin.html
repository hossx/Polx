<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../../../bower_components/core-animated-pages/transitions/cross-fade.html">
<link rel="import" href="../../../bower_components/core-label/core-label.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input-decorator.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../../../bower_components/ajax-form/ajax-form.html">

<polymer-element name="signon-signin" attributes="page,z">
  <template>
    <link rel="stylesheet" href="signon-signin.css">

    <core-animated-pages id="pages" flex valueattr="id" selected="{{page}}">
      <section flex id="signin">
        <paper-shadow z="{{z}}">
          <div class="container" vertical layout>
            <div class="label">Member Login</div>
            <div class="outer">
              <form is="ajax-form" method="post" action="{{loginUrl}}" id="loginForm">
                <div class="inner" center-justified vertical layout>
                  <paper-input-decorator class="input" label="Email" floatingLabel>
                    <input is="core-input" name="username" value="{{loginEmail}}">
                  </paper-input-decorator required>
                  <paper-input-decorator class="input" label="Password" floatingLabel>
                    <input is="core-input" type="password" name="password" value="{{loginPassword}}">
                  </paper-input-decorator required>
                </div>
                <div class="errorMsg">{{errorMsg}}</div>
                <div class="action" vertical layout>
                  <paper-button disabled?="{{loginDisabled}}" on-tap="{{logMeIn}}">Login</paper-button>
                </div>
              </form>
            </div>
            <div class="options" horizontal center-justified layout>
              <a href="/#/member/signon"><paper-button class="highlight" noink>Become a member</paper-button></a>
              <a href="/#/member/forgetpwd"><paper-button noink>Forget password?</paper-button></a>
            </div>
          </div>
        </paper-shadow>
      </section>

      <section id="signon">
        <paper-shadow z="{{z}}">
          <div class="container" vertical layout>
            <div class="label">Become a Member</div>
            <div class="outer">
              <form is="ajax-form" method="post" action="{{registerUrl}}" id="registerForm">
                <div class="inner" center-justified vertical layout>
                  <paper-input-decorator class="input" label="Email" floatingLabel>
                    <input is="core-input" name="email" value="{{registerEmail}}" required>
                  </paper-input-decorator>
                  <paper-input-decorator class="input" label="Password" floatingLabel>
                    <input is="core-input" name="password" type="password" value="{{registerPassword}}" required>
                  </paper-input-decorator>

                  <paper-input-decorator class="input" label="Confirm Password" floatingLabel>
                    <input is="core-input" type="password" value="{{registerPassword2}}">
                  </paper-input-decorator required>
                </div>

                <div id="agree" vertical layout>
                  <core-label center horizontal layout>
                    <paper-checkbox class="checkbox" checked="{{termsAgreed}}" on-change="{{agreeChanged}}" for></paper-checkbox>
                    <div> I read and agree to the <a href="/#/doc/tos" target="_blank">Terms of Service</a>
                    </div>
                  </core-label>
                </div>
                <div class="errorMsg">{{errorMsg}}</div>
                <div class="action" vertical layout>
                  <paper-button id="registerButton" disabled?="{{registerDisabled}}" on-tap="{{registerMe}}">Register</paper-button>
                </div>
              </form>
            </div>
            <div class="options" horizontal center-justified layout>
              <a href="/#/member/signin"><paper-button noink>Member login</paper-button></a>
            </div>
          </div>
        </paper-shadow>
      </section>

      <section id="forgetpwd">
        <paper-shadow z="{{z}}">
          <div class="container" vertical layout>
            <div class="label">Forget Password</div>
            <div class="outer">
              <div class="inner" center-justified vertical layout>
                <paper-input-decorator class="input" label="Email" floatingLabel>
                  <input is="core-input" value="{{email}}">
                </paper-input-decorator required>
              </div>

              <div class="action" vertical layout>
                <paper-button>Retrieve Password</paper-button>
              </div>
            </div>
            <div class="options" horizontal center-justified layout>
              <a href="/#/member/signin"><paper-button noink>Member login</paper-button></a>
              <a href="/#/member/signon"><paper-button class="highlight" noink>Become a member</paper-button></a>
            </div>
          </div>
        </paper-shadow>
      </section>

      <section id="signout">
        <paper-shadow z="{{z}}">
          <div class="container" vertical layout>
            <div class="label">Signout</div>
            <div class="outer">
              <div id="logout" center vertical layout>
                <div>You have signed in already.</div>
                <div id="userid"><a href="/#/account">Go to my Account</a></div>
              </div>

              <div class="action" vertical layout>
                <paper-button>Signout</paper-button>
              </div>
            </div>
          </div>
          <div class="options" horizontal center-justified layout>

          </div>
        </paper-shadow>
      </section>

      <section id="message">
        <paper-shadow z="{{z}}">
          <div class="container" vertical layout>
            <div class="label">{{message.title}}</div>
            <div class="outer">
              <div id="msg" vertical layout>
                <template repeat="{{detail in message.details}}">
                  <p>{{detail}}</p>
                </template>
              </div>
            </div>
            <div class="options" horizontal center-justified layout>
              <a href="/#/member/signin"><paper-button noink>Member login</paper-button></a>
              <a href="/#/member/signon"><paper-button class="highlight" noink>Become a member</paper-button></a>
            </div>
          </div>
        </paper-shadow>
      </section>
    </core-animated-pages>

  </template>
  <script src="signon-signin.js"></script>
</polymer-element>
