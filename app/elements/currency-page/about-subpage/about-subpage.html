<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../../../bower_components/marked-element/marked-element.html">
<link rel="import" href="../../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../../bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="../../section-group/section-group.html">
<link rel="import" href="../../charts/candlestick-chart/candlestick-chart.html">
<link rel="import" href="../../weibo-wall/weibo-wall.html">

<polymer-element name="about-subpage" attributes="currency" flex>
  <template>
    <link rel="stylesheet" href="about-subpage.css">

    <section-group>
      <div label>Price Trend</div>
      <paper-shadow>
        <div>
          <template if="{{markets.length > 1}}">
            <paper-tabs id="market-tabs" selected="{{tab}}">
              <template repeat="{{market in markets}}">
                <paper-tab> {{market.id}} </paper-tab>
              </template>
            </paper-tabs>
          </template>

          <core-animated-pages id="kchart-pages" selected="{{tab}}">
            <template repeat="{{market in markets}}">
              <candlestick-chart market="{{market}}" width="728" height="420"></candlestick-chart>
            </template>
          </core-animated-pages>
        </div>
      </paper-shadow>

      <core-ajax url="../markdown/currency-{{currency.id}}.md" response="{{wiki}}" auto></core-ajax>
      <template if="{{wikiLinted !== ''}}">
        <div label>About {{currency.name}}</div>
        <paper-shadow>
          <div>
            <marked-element id="marked" text="{{wikiLinted}}"></marked-element>
          </div>
        </paper-shadow>
      </template>

      <div label>Buzz</div>
      <paper-shadow>
        <div>
          <weibo-wall currency="{{currency}}"></weibo-wall>
        </div>
      </paper-shadow>

    </section-group>
  </template>
  <script src="about-subpage.js"></script>
</polymer-element>
