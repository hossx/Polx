<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../../../bower_components/marked-element/marked-element.html">
<link rel="import" href="../../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../../bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../section-group/section-group.html">
<link rel="import" href="../../charts/candlestick-chart/candlestick-chart.html">
<link rel="import" href="../../weibo-wall/weibo-wall.html">
<link rel="import" href="../../tweet-wall/tweet-wall.html">

<polymer-element name="about-subpage" attributes="currency" flex>
  <template>
    <link rel="stylesheet" href="about-subpage.css">

    <section-group has-footer>
      <paper-shadow>
        <div label>
          <h2>{{M.trend}}</h2>
        </div>
        <div>
          <template if="{{markets.length > 1}}">
            <paper-tabs id="market-tabs" selected="{{tab}}">
              <template repeat="{{market in markets}}">
                <paper-tab> {{market.id}} </paper-tab>
              </template>
            </paper-tabs>
          </template>

          <core-animated-pages id="kchart-pages" selected="{{tab}}">
            <template repeat="{{market in markets}}">
              <div vertical center layout>
                <div class="candle">
                  <candlestick-chart flex market="{{market}}" width="728" height="420"></candlestick-chart>
                </div>
                <paper-button class="trade-btn" raised><a href="/#/market/{{market.id}}">Trade {{market.name}}</a>
                </paper-button>
              </div>
            </template>
          </core-animated-pages>
        </div>
      </paper-shadow>

      <core-ajax url="{{wikiFile}}" response="{{wiki}}" auto></core-ajax>
      <template if="{{wikiLinted !== ''}}">
        <paper-shadow>
          <div label>
            <h2>{{M.about}} {{currency.name}}</h2>
          </div>
          <div>
            <marked-element id="marked" text="{{wikiLinted}}"></marked-element>
          </div>
        </paper-shadow>
      </template>

      <template if="{{showWeibo}}">
        <paper-shadow>
          <div label>
            <h2>{{M.buzz}}</h2>
          </div>
          <div>
            <weibo-wall currency="{{currency}}"></weibo-wall>
          </div>
        </paper-shadow>
      </template>

      <template if="{{showTweets}}">
        <paper-shadow>
          <div label>
            <h2>{{M.buzz}}</h2>
          </div>
          <div>
            <tweet-wall currency="{{currency}}"></tweet-wall>
          </div>
        </paper-shadow>
      </template>

    </section-group>
  </template>
  <script src="about-subpage.js"></script>
</polymer-element>
