<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../../bower_components/marked-element/marked-element.html">
<link rel="import" href="../../../bower_components/core-tooltip/core-tooltip.html">
<link rel="import" href="../../section-group/section-group.html">
<link rel="import" href="../../crypto-address/crypto-address.html">

<polymer-element name="details-subpage" attributes="currency" flex>
  <template>
    <link rel="stylesheet" href="details-subpage.css">
    <core-ajax url="../markdown/currency-{{currency.id}}.md" response="{{wiki}}" auto></core-ajax>
    <core-ajax url="{{detailsUrl}}" response="{{details}}" auto></core-ajax>
    <section-group>
      <div label>Reserve Details</div>
      <paper-shadow>
        <div no-padding>
          <template repeat="{{group in details.reserves}}">
            <template repeat="{{data,idx in group.addresses}}">
              <div class="data" vertical layout>
                <div horizontal layout>
                  <div flex>
                    <core-tooltip label="This address is in our {{group.label}} wallet." position="right">
                      <crypto-address class="{{group.label}}" currency="{{currency}}" addr="{{data[0]}}"></crypto-address>
                    </core-tooltip>
                  </div>
                  <core-tooltip label="This is how much we have in this wallet." position="left">
                    <div class="balance">{{data[1]}} {{currency.unit}}</div>
                  </core-tooltip>
                </div>
                <div class="verify" vertical layout>
                  <div class="l">Signed Message:</div>
                  <div class="code"> {{data[2]}}</div>
                  <div class="l">Signature:</div>
                   <div class="code">{{data[3]}} </div>
                </div>
            </template>
            </div>
          </template>
        </div>
      </paper-shadow>

      <template if="{{wiki !== ''}}">
        <div label>About {{currency.name}}</div>
        <paper-shadow>
          <div>
            <marked-element id="marked" text="{{wiki}}"></marked-element>
          </div>
        </paper-shadow>
      </template>

    </section-group>
  </template>
  <script src="details-subpage.js"></script>
</polymer-element>
