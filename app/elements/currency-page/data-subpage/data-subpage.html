<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../../bower_components/marked-element/marked-element.html">
<link rel="import" href="../../../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../crypto-address/crypto-address.html">

<polymer-element name="data-subpage" attributes="currency" flex>
  <template>
    <link rel="stylesheet" href="data-subpage.css">
    <core-ajax id="ajax" url="{{txsUrl}}" response="{{response}}" auto></core-ajax>

    <section-group>
      <paper-shadow>
        <div>{{currency.fullName}}</div>
        <div id="list" vertical center layout>
          <table>
            <thead>
              <tr>
                <td>Timestamp</td>
                <td>User ID</td>
                <td>Type</td>
                <td>Amount</td>
                <td>Address</td>
                <td>Transaction</td>
              </tr>
            </thead>
            <tbody>
              <template repeat="{{tx in transactions}}">
                <tr>
                  <td>{{tx[1]}}</td>
                  <td>
                    <a href="{{tx[2]}} | formatUserUrl}}">{{tx[2]}}</a>
                  </td>
                  <td>{{tx[3]}}</td>
                  <td>{{tx[4]}}</td>
                  <td>
                    <a href="{{tx[5]}} | formatAddrUrl}}">
                      <crypto-address class="{{group.label}}" currency="{{currency}}" addr="{{tx[5]}}"></crypto-address>
                    </a>
                  </td>
                  <td><a href="{{tx[6] | formatTxUrl}}">{{tx[6]}}</a>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
          <paper-button id="load-button" disabled?="{{!response.hasMore}}" on-tap="{{loadMore}}">Load more</paper-button>
        </div>

      </paper-shadow>
    </section-group>
  </template>

  <script src="data-subpage.js"></script>
</polymer-element>
