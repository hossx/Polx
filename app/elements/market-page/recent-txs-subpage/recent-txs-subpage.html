<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../../nice-number/nice-number.html">
<link rel="import" href="../../charts/tradingrecords-chart/tradingrecords-chart.html">

<link rel="import" href="../../section-group/section-group.html">
<polymer-element name="recent-txs-subpage" attributes="market,active" vertical layout>
  <template>
    <link rel="stylesheet" href="recent-txs-subpage.css">

    <core-ajax url="{{transactionsUrl}}" handleAs="json" response="{{response}}" auto></core-ajax>

    <section-group has-footer>
      <paper-shadow>
        <div label>{{market.id}} Chart</div>
        <div class="card" vertical center layout>
          <tradingrecords-chart market="{{market}}" width="720" records="{{records}}"></tradingrecords-chart>
        </div>
      </paper-shadow>

      <paper-shadow>
        <div label>{{market.id}} Trading Records</div>
        <div class="card">
          <table>
            <thead>
              <tr>
                <td>Index</td>
                <td>Taker Order Type</td>
                <td>Price</td>
                <td>Quantity</td>
                <td>Total</td>
              </tr>
            </thead>
            <tbody>
              <template repeat="{{record,idx in records}}">
                <tr class="{{record.typeClass}}">
                  <td class="idx">{{idx+1}}</td>
                  <td class="type">{{record.typeLabel}}</td>
                  <td>
                    <nice-number class="price bold" v="{{record.price}}" p="{{market.pricePrecision}}"></nice-number>
                  </td>
                  <td>
                    <nice-number v="{{record.quantity}}" p="{{market.quantityPrecision}}"></nice-number>
                  </td>
                  <td>
                    <nice-number v="{{record.total}}" p="{{market.totalPrecision}}"></nice-number>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
        </div>
      </paper-shadow>
    </section-group>
  </template>
  <script src="recent-txs-subpage.js"></script>
</polymer-element>
