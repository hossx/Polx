<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-animated-pages/core-animated-pages.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/cross-fade.html">
<link rel="import" href="../../bower_components/core-animated-pages/transitions/hero-transition.html">
<link rel="import" href="../../bower_components/paper-shadow/paper-shadow.html">
<link rel="import" href="../../bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="../cp-media-query/cp-media-query.html">
<link rel="import" href="trade-subpage/mycoin-card.html">
<link rel="import" href="trade-subpage/toppending-card.html">
<link rel="import" href="trade-subpage/action-card-buy.html">
<link rel="import" href="trade-subpage/action-card-sell.html">

<polymer-element name="trade-subpage" attributes="market" horizontal center-justified layout>
<template>
  <link rel="stylesheet" href="trade-subpage.css">
  
  <cp-media-query smallup="{{smallup}}"></cp-media-query>
  <core-header-panel flex mode="scroll">
    <div main horizontal center-justified layout>
      <div id="container" class="{{ {smallup: smallup} | tokenList}}" flex vertical layout>
        <paper-shadow z="1">
          <toppending-card market="{{market}}" smallup="{{smallup}}" targetCoin="{{targetCoin}}"></toppending-card>
        </paper-shadow>

        <paper-shadow z="1">
          <mycoin-card
            smallup="{{smallup}}" 
            selected="{{selected}}"
            coin="{{targetCoin}}" total="{{11111111.1}}" 
            available="{{121.1}}" locked="{{12.11212}}" 
            pendingWithdrawal="{{121.12}}">
          </mycoin-card>
        </paper-shadow>

        <core-animated-pages  selected="{{selected}}" transitions="hero-transition cross-fade-all">

          <section cross-fade>
            <div id="actions" horizontal hero-p layout>
              <div  flex horizontal center-justified layout>
                <core-tooltip hero-id="buy" hero label="Buy {{coin}}" position="left">
                  <paper-fab  id="buy" icon="add" on-tap="{{triggerBuy}}"></paper-fab>
                </core-tooltip>
              </div>
              <div  flex horizontal center-justified layout>
                <core-tooltip hero-id="sell" hero label="Sell {{coin}}" position="right">
                  <paper-fab  id="sell" icon="remove" on-tap="{{triggerSell}}"></paper-fab>
                </core-tooltip>
              </div>
            </div>
          </section>

          <section hero-p>
            <paper-shadow z="1" hero-id="sell" hero>
              <action-card-sell
                smallup="{{smallup}}" 
                selected="{{selected}}"
                coin="{{targetCoin}}">
              </action-card-sell>
            </paper-shadow>
          </section>

          <section hero-p>
            <paper-shadow z="1" hero-id="buy" hero>
              <action-card-buy
                smallup="{{smallup}}" 
                selected="{{selected}}"
                coin="{{targetCoin}}">
              </action-card-buy>
            </paper-shadow>
          </section>

        </core-animated-pages>

      </div>
    </div>
  </core-header-panel>
</template>
<script>
  (function () {
    'use strict';

    Polymer({
      selected: 0,
      triggerSell: function(){this.selected=1;},
      triggerBuy: function(){this.selected=2;},
      marketChanged: function(oldV, newV) {
        this.targetCoin = newV.substring(4);
      },
    });

  })();
</script>
</polymer-element>